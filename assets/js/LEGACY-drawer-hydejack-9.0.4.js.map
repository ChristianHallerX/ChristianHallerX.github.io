{"version":3,"sources":["webpack:///./_js/src/drawer.js"],"names":["getRange","setupIcon","removeIcon","svg","document","getElementById","parentNode","removeChild","drawerEl","img","createElement","id","src","href","alt","addEventListener","close","appendChild","drawerWidth","size","DESKTOP","isMobileSafari","Promise","all","window","then","webComponentsReady","stylesheetReady","MOBILE","LARGE_DESKTOP","subscribeWhen","p$","source","process","Error","pipe","switchMap","p","NEVER","detectSize","matchMedia","BREAK_POINT_DYNAMIC","matches","BREAK_POINT_3","sidebarEl","contentEl","querySelector","e","preventDefault","stopPropagation","toggle","querySelectorAll","forEach","el","isSafari","setAttribute","isMobile","hasCSSOM","CSSTransformValue","CSSTranslate","CSS","px","number","tValue","oValue","updateSidebar","t","distance","value","opacity","x","attributeStyleMap","set","style","transform","size$","merge","fromMediaQuery","startWith","map","peekWidth$","fromEvent","detail","viewWidth$","passive","getViewWidth","distance$","combineLatest","viewWidth","t$","undefined","opened","willChange","scrollTop","getScrollTop","classList","contains","history","state","closedOnce","replaceState","title","removeAttribute","opened$","distinctUntilChanged","tap","drawerHeight","getBoundingClientRect","height","add","scrollTo","once","_drawer","withLatestFrom","args","subscribe","range","filter","deltaY","translateX","throttleTime"],"mappings":"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","file":"LEGACY-drawer-hydejack-9.0.4.js","sourcesContent":["// Copyright (c) 2019 Florian Klampfer <https://qwtel.com/>\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { fromEvent, merge, NEVER, combineLatest } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  map,\n  filter,\n  startWith,\n  switchMap,\n  tap,\n  throttleTime,\n  withLatestFrom,\n} from 'rxjs/operators';\n\nimport {\n  BREAK_POINT_3,\n  BREAK_POINT_DYNAMIC,\n  isSafari,\n  isMobile,\n  isMobileSafari,\n  hasCSSOM,\n  webComponentsReady,\n  stylesheetReady,\n  getScrollTop,\n  getViewWidth,\n  fromMediaQuery,\n} from './common';\n\n(async () => {\n  await Promise.all([\n    ...('customElements' in window\n      ? []\n      : [\n          import(/* webpackChunkName: \"webcomponents\" */ './polyfills/webcomponents').then(() =>\n            import(/* webpackChunkName: \"shadydom\" */ './polyfills/shadydom'),\n          ),\n        ]),\n    ...('ResizeObserver' in window\n      ? []\n      : [import(/* webpackChunkName: \"resize-observer\" */ './polyfills/resize-observer')]),\n  ]);\n\n  await webComponentsReady;\n  await stylesheetReady;\n\n  const MOBILE = 1;\n  const DESKTOP = 2;\n  const LARGE_DESKTOP = 3;\n\n  const subscribeWhen = (p$) => (source) => {\n    if (process.env.DEBUG && !p$) throw Error();\n    return p$.pipe(switchMap((p) => (p ? source : NEVER)));\n  };\n\n  // Determines the range from which to draw the drawer in pixels, counted from the left edge.\n  // It depends on the browser, e.g. Safari has a native gesture when sliding form the side,\n  // so we ignore the first 35 pixels (roughly the range for the native gesture),\n  // to avoid triggering both gestures.\n  function getRange(drawerWidth, size) {\n    if (size >= DESKTOP) return [0, drawerWidth];\n    if (isMobileSafari) return [35, 150];\n    return [0, 150];\n  }\n\n  // The functions below add an svg graphic to the sidebar\n  // that indicate that the sidebar can be drawn using touch gestures.\n  function setupIcon(drawerEl) {\n    const img = document.getElementById('_hrefSwipeSVG');\n    if (img) {\n      const svg = document.createElement('img');\n      svg.id = '_swipe';\n      svg.src = img.href;\n      svg.alt = 'Swipe image';\n      svg.addEventListener('click', () => drawerEl.close());\n      document.getElementById('_sidebar')?.appendChild(svg);\n    }\n  }\n\n  function removeIcon() {\n    const svg = document.getElementById('_swipe');\n    svg?.parentNode?.removeChild(svg);\n  }\n\n  const detectSize = () =>\n    window.matchMedia(BREAK_POINT_DYNAMIC).matches\n      ? LARGE_DESKTOP\n      : window.matchMedia(BREAK_POINT_3).matches\n      ? DESKTOP\n      : MOBILE;\n\n  // First we get hold of some DOM elements.\n  const drawerEl = document.getElementById('_drawer');\n  const sidebarEl = document.getElementById('_sidebar');\n  const contentEl = sidebarEl?.querySelector('.sidebar-sticky');\n  if (!drawerEl || !sidebarEl || !contentEl) return;\n\n  document.getElementById('_menu')?.addEventListener('click', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    drawerEl.toggle();\n  });\n\n  sidebarEl.querySelectorAll('a[href^=\"/\"]:not(.external)').forEach((el) => el.addEventListener('click', () => drawerEl.close()));\n\n  if (isSafari) drawerEl.setAttribute('threshold', '0');\n  if (!isMobile) drawerEl.setAttribute('mouseevents', '');\n\n  const [tValue, oValue] = hasCSSOM\n    ? [new CSSTransformValue([new CSSTranslate(CSS.px(0), CSS.px(0))]), CSS.number(1)]\n    : [null, null];\n\n  const updateSidebar = (t, size, distance) => {\n    const value = distance * t;\n    const opacity = size >= DESKTOP ? 1 : 1 - t;\n    if (hasCSSOM) {\n      tValue[0].x.value = value;\n      oValue.value = opacity;\n      sidebarEl.attributeStyleMap.set('transform', tValue);\n      contentEl.attributeStyleMap.set('opacity', oValue);\n    } else {\n      sidebarEl.style.transform = `translateX(${value}px)`;\n      contentEl.style.opacity = opacity;\n    }\n  };\n\n  // A flag for the 3 major viewport sizes we support\n  const size$ = merge(\n    fromMediaQuery(window.matchMedia(BREAK_POINT_3)),\n    fromMediaQuery(window.matchMedia(BREAK_POINT_DYNAMIC)),\n  ).pipe(startWith({}), map(detectSize));\n\n  // An observable keeping track of the drawer (peek) width.\n  const peekWidth$ = fromEvent(drawerEl, 'peek-width-change').pipe(map((e) => e.detail));\n\n  // An observable keeping track the viewport width\n  const viewWidth$ = fromEvent(window, 'resize', { passive: true }).pipe(startWith({}), map(getViewWidth));\n\n  // An observable keeping track of the distance between\n  // the middle point of the screen and the middle point of the drawer.\n  const distance$ = combineLatest(peekWidth$, viewWidth$).pipe(\n    map(([drawerWidth, viewWidth]) => viewWidth / 2 - drawerWidth / 2),\n  );\n\n  const t$ = merge(\n    distance$.pipe(map(() => (drawerEl.opacity !== undefined ? 1 - drawerEl.opacity : opened ? 0 : 1))),\n    fromEvent(drawerEl, 'hy-drawer-move').pipe(\n      map(({ detail: { opacity } }) => {\n        return 1 - opacity;\n      }),\n    ),\n  );\n\n  drawerEl.addEventListener('hy-drawer-prepare', () => {\n    sidebarEl.style.willChange = 'transform';\n    contentEl.style.willChange = 'opacity';\n  });\n\n  drawerEl.addEventListener('hy-drawer-transitioned', () => {\n    sidebarEl.style.willChange = '';\n    contentEl.style.willChange = '';\n  });\n\n  // Save scroll position before the drawer gets initialized.\n  const scrollTop = getScrollTop();\n\n  // Start the drawer in `opened` state when the cover class is present,\n  // and the user hasn't started scrolling already.\n  const opened = drawerEl.classList.contains('cover') && scrollTop <= 0 && !(history.state && history.state.closedOnce);\n\n  if (!opened) {\n    if (!history.state) history.replaceState({}, document.title);\n    history.state.closedOnce = true;\n    drawerEl.removeAttribute('opened');\n  }\n\n  const opened$ = fromEvent(drawerEl, 'hy-drawer-transitioned').pipe(\n    map((e) => e.detail),\n    distinctUntilChanged(),\n    tap((opened) => {\n      if (!opened) {\n        removeIcon();\n        if (!history.state) history.replaceState({}, document.title);\n        history.state.closedOnce = true;\n      }\n    }),\n    startWith(opened),\n  );\n\n  // We need the height of the drawer in case we need to reset the scroll position\n  const drawerHeight = opened ? null : drawerEl.getBoundingClientRect().height;\n\n  drawerEl.addEventListener(\n    'hy-drawer-init',\n    () => {\n      drawerEl.classList.add('loaded');\n\n      setupIcon(drawerEl);\n\n      if (drawerHeight && scrollTop >= drawerHeight) {\n        window.scrollTo(0, scrollTop - drawerHeight);\n      }\n    },\n    { once: true },\n  );\n\n  await import(/* webpackMode: \"eager\" */ '@hydecorp/drawer');\n\n  window._drawer = drawerEl;\n\n  t$.pipe(\n    withLatestFrom(size$, distance$),\n    tap((args) => updateSidebar(...args)),\n  ).subscribe();\n\n  // Keeping the drawer updated.\n  peekWidth$\n    .pipe(\n      withLatestFrom(size$),\n      map((args) => getRange(...args)),\n      tap((range) => {\n        drawerEl.range = range;\n      }),\n    )\n    .subscribe();\n\n  // Hacky way of letting the cover page close when scrolling\n  fromEvent(document, 'wheel', { passive: false })\n    .pipe(\n      subscribeWhen(opened$),\n      filter((e) => e.deltaY > 0),\n      tap((e) => {\n        if (drawerEl.translateX > 0) e.preventDefault();\n      }),\n      throttleTime(500),\n      tap(() => drawerEl.close()),\n    )\n    .subscribe();\n})();\n"],"sourceRoot":""}